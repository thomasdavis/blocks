$schema: "blocks/v2"

name: "Blog Content Validator"

ai:
  provider: "openai"
  model: "gpt-4o-mini"
  on_failure: "warn"

philosophy:
  - "Blog posts must include humor and maintain an engaging, conversational tone"
  - "Content should be accessible and relatable, not overly formal or academic"

domain:
  entities:
    blog_post:
      fields: [path, content]

    validation_result:
      fields: [valid, message]

  semantics:
    humor_presence:
      description: "Detects presence and quality of humor in content"
      extraction_hint: "Look for wit, personal anecdotes, conversational tone, storytelling"

    conversational_tone:
      description: "Measures how conversational and engaging the writing is"
      extraction_hint: "Check for second-person pronouns (you, your), first-person (I, we), questions, casual language"

    humor_score:
      description: "Must include humor or light-hearted elements. Humor should be authentic, not forced."

    tone_quality:
      description: "Must be conversational and engaging. Avoid corporate jargon and overly formal language."

validators:
  - schema
  - shape
  - name: domain
    config:
      rules:
        - id: humor_required
          description: "Blog posts must include humor, wit, or light-hearted commentary"
        - id: conversational_tone
          description: "Writing must be conversational, using 'you' and 'I' to connect with readers"
        - id: no_corporate_speak
          description: "Avoid corporate jargon like 'leverage', 'synergy', 'paradigm shift'"

blocks:
  validator.blog_post:
    description: "Validates blog post content for humor and conversational tone"
    path: "validators/blog-post"
    exclude:
      - "**/*.test.ts"
    inputs:
      - name: post
        type: entity.blog_post
    outputs:
      - name: result
        type: entity.validation_result
        semantics: [humor_score, tone_quality]
        constraints:
          - "Must detect engaging, conversational content"
          - "Must ensure humor is present"
